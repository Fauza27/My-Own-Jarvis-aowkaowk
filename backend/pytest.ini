[pytest]

# Folder tempat pytest mencari test files
testpaths = tests

# Pola nama file yang dianggap sebagai test file
python_files = test_*.py

# Pola nama function/method yang dianggap sebagai test
python_functions = test_*

# Pola nama class yang dianggap sebagai test class
python_classes = Test*

# Opsi default yang selalu dijalankan
# -v = verbose (tampilkan nama test satu per satu)
# -p no:warnings = suppress warnings yang tidak penting
# --tb=short = format traceback yang lebih ringkas saat error
addopts =
    -v
    --tb=short
    -p no:warnings

# Marker kustom — mendaftarkan label yang bisa dipakai di @pytest.mark.xxx
# Ini mencegah peringatan "PytestUnknownMarkWarning"
markers =
    unit: Test unit — cepat, terisolasi, tanpa external dependency
    integration: Test integrasi — butuh koneksi ke Supabase test
    api: Test API endpoint HTTP
    functional: Test skenario/use case end-to-end
    performance: Test performa dan load
    security: Test keamanan dan autentikasi
    regression: Test regresi untuk fitur kritis
    slow: Test yang berjalan lebih dari 1 detik

# Konfigurasi pytest-asyncio
asyncio_mode = auto